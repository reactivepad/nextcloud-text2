{"version":3,"sources":["webpack:///src/components/MenuBar.vue","webpack:///src/components/MenuBubble.vue","webpack:///./src/components/MenuBar.vue?98bd","webpack:///./src/components/MenuBubble.vue?0747","webpack:///./src/components/MenuBar.vue?8806","webpack:///./src/components/MenuBubble.vue?41cb","webpack:///./src/components/MenuBar.vue?acdc","webpack:///./src/components/MenuBubble.vue?d7e2","webpack:///./src/components/MenuBar.vue","webpack:///./src/components/MenuBar.vue?c014","webpack:///./src/components/MenuBar.vue?f631","webpack:///./src/components/MenuBar.vue?35ac","webpack:///./src/components/MenuBubble.vue","webpack:///./src/components/MenuBubble.vue?7a05","webpack:///./src/components/MenuBubble.vue?f800","webpack:///./src/components/MenuBubble.vue?24ee","webpack:///./src/helpers/files.js","webpack:///./src/helpers/mime.js","webpack:///./src/mixins/menubar.js"],"names":["FILE_ACTION_IDENTIFIER","fetchFileInfo","user","path","axios","method","url","generateRemoteUrl","headers","requesttoken","OC","requestToken","data","response","files","OCA","Files","App","fileList","filesClient","_client","parseMultiStatus","map","file","fileInfo","_parseFileInfo","href","registerFileCreate","newFileMenuPlugin","attach","menu","id","addMenuEntry","displayName","t","templateName","iconClass","fileType","actionHandler","name","createFile","then","status","fileInfoModel","FileInfoModel","Viewer","fileActions","triggerAction","Plugins","register","registerFileActionFallback","sharingToken","document","getElementById","value","dir","ViewerRoot","createElement","body","appendChild","registerAction","mime","PERMISSION_UPDATE","PERMISSION_READ","imagePath","filename","window","FileList","findFile","Promise","all","imports","getCurrentDirectory","Vue","default","prototype","n","Editor","vm","render","h","props","fileId","active","shareToken","relativePath","mimeType","mimetype","$mount","i","openMimetypes","length","setDefault","label","class","isActive","action","command","undo","redo","strong","em","strike","paragraph","visible","children","heading","level","bullet_list","ordered_list","blockquote","code_block"],"mappings":"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;AACA;AACA;AACA;AACA,kDAAkD,oBAAoB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;;;AC1NA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qBAAqB;AACjC,SAAS,yBAAyB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA,6CAA6C,+BAA+B;AAC5E,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,wCAAwC;AAC1E,qCAAqC,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA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","file":"editor-rich.js?v=06b0d4e402afda8ec5ab","sourcesContent":["<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<EditorMenuBar v-slot=\"{ commands, isActive }\" :editor=\"editor\">\n\t\t<div class=\"menubar\">\n\t\t\t<div v-if=\"isRichEditor\" ref=\"menubar\" class=\"menubar-icons\">\n\t\t\t\t<button class=\"rxpButton\" @click=\"rxpClickButton(0, editor)\">Formula</button>\n\t\t\t\t<button class=\"rxpButton\" @click=\"rxpClickButton(1, editor)\">Table</button>\n\t\t\t\t<template v-for=\"(icon, $index) in allIcons\">\n\t\t\t\t\t<button v-if=\"icon.class\"\n\t\t\t\t\t\tv-show=\"$index < iconCount\"\n\t\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\t\t:title=\"icon.label\"\n\t\t\t\t\t\t:class=\"getIconClasses(isActive, icon)\"\n\t\t\t\t\t\t@click=\"clickIcon(commands, icon)\" />\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div v-show=\"$index < iconCount\"\n\t\t\t\t\t\t\t:key=\"icon.label\"\n\t\t\t\t\t\t\tv-click-outside=\"() => hideChildMenu(icon)\"\n\t\t\t\t\t\t\tclass=\"submenu\">\n\t\t\t\t\t\t\t<button :class=\"childIconClass(isActive, icon.children, )\"\n\t\t\t\t\t\t\t\t:title=\"icon.label\"\n\t\t\t\t\t\t\t\t@click.prevent=\"toggleChildMenu(icon)\" />\n\t\t\t\t\t\t\t<div :class=\"{open: isChildMenuVisible(icon)}\" class=\"popovermenu menu-center\">\n\t\t\t\t\t\t\t\t<PopoverMenu :menu=\"childPopoverMenu(isActive, commands, icon.children, icon)\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<Actions>\n\t\t\t\t\t<template v-for=\"(icon, $index) in allIcons\">\n\t\t\t\t\t\t<ActionButton v-if=\"icon.class && isHiddenInMenu($index)\"\n\t\t\t\t\t\t\t:key=\"icon.class\"\n\t\t\t\t\t\t\t:icon=\"icon.class\"\n\t\t\t\t\t\t\t@click=\"clickIcon(commands, icon)\">\n\t\t\t\t\t\t\t{{ icon.label }}\n\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t<template v-else-if=\"!icon.class && isHiddenInMenu($index)\">\n\t\t\t\t\t\t\t<ActionButton v-for=\"childIcon in icon.children\"\n\t\t\t\t\t\t\t\t:key=\"childIcon.class\"\n\t\t\t\t\t\t\t\t:icon=\"childIcon.class\"\n\t\t\t\t\t\t\t\t@click=\"clickIcon(commands, childIcon)\">\n\t\t\t\t\t\t\t\t{{ childIcon.label }}\n\t\t\t\t\t\t\t</ActionButton>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t</Actions>\n\t\t\t</div>\n\t\t\t<slot>\n\t\t\t\tLeft side\n\t\t\t</slot>\n\t\t</div>\n\t</EditorMenuBar>\n</template>\n\n<script>\nimport { EditorMenuBar } from 'tiptap'\nimport Tooltip from 'nextcloud-vue/dist/Directives/Tooltip'\nimport { menuItems } from '@reactivepad/prosemirror'\nimport menuBarIcons from './../mixins/menubar'\nimport { fetchFileInfo } from './../helpers/files'\n\nimport Actions from 'nextcloud-vue/dist/Components/Actions'\nimport ActionButton from 'nextcloud-vue/dist/Components/ActionButton'\nimport PopoverMenu from 'nextcloud-vue/dist/Components/PopoverMenu'\nimport ClickOutside from 'vue-click-outside'\n\nexport default {\n\tname: 'MenuBar',\n\tcomponents: {\n\t\tEditorMenuBar,\n\t\tActionButton,\n\t\tPopoverMenu,\n\t\tActions\n\t},\n\tdirectives: {\n\t\tTooltip,\n\t\tClickOutside\n\t},\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null\n\t\t},\n\t\tisRichEditor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata: () => {\n\t\treturn {\n\t\t\twindowWidth: 0,\n\t\t\twindowHeight: 0,\n\t\t\tforceRecompute: 0,\n\t\t\tsubmenuVisibility: {},\n\t\t\ticons: [...menuBarIcons]\n\t\t}\n\t},\n\tcomputed: {\n\t\tisPublic() {\n\t\t\treturn document.getElementById('isPublic') && document.getElementById('isPublic').value === '1'\n\t\t},\n\t\tisHiddenInMenu() {\n\t\t\treturn ($index) => $index - this.iconCount >= 0\n\t\t},\n\t\tgetIconClasses() {\n\t\t\treturn (isActive, icon) => {\n\t\t\t\tlet classes = {\n\t\t\t\t\t'is-active': icon.isActive(isActive)\n\t\t\t\t}\n\t\t\t\tclasses[icon.class] = true\n\t\t\t\treturn classes\n\t\t\t}\n\t\t},\n\t\tisChildMenuVisible() {\n\t\t\treturn (icon) => {\n\t\t\t\treturn this.submenuVisibility.hasOwnProperty(icon.label) ? this.submenuVisibility[icon.label] : false\n\t\t\t}\n\t\t},\n\t\tallIcons() {\n\t\t\tif (this.isPublic) {\n\t\t\t\treturn this.icons\n\t\t\t}\n\t\t\treturn [...this.icons, {\n\t\t\t\tlabel: t('text', 'Insert image'),\n\t\t\t\tclass: 'icon-image',\n\t\t\t\tisActive: () => {\n\t\t\t\t},\n\t\t\t\taction: (commands) => {\n\t\t\t\t\tthis.showImagePrompt(commands.image)\n\t\t\t\t}\n\t\t\t}]\n\t\t},\n\t\tchildPopoverMenu() {\n\t\t\treturn (isActive, commands, icons, parent) => {\n\t\t\t\tlet popoverMenuItems = []\n\t\t\t\tfor (const index in icons) {\n\t\t\t\t\tpopoverMenuItems.push({\n\t\t\t\t\t\ttext: icons[index].label,\n\t\t\t\t\t\ticon: icons[index].class,\n\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\ticons[index].action(commands)\n\t\t\t\t\t\t\tthis.hideChildMenu(parent)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactive: icons[index].isActive(isActive)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\treturn popoverMenuItems\n\t\t\t}\n\t\t},\n\t\tchildIconClass() {\n\t\t\treturn (isActive, icons) => {\n\t\t\t\tfor (const index in icons) {\n\t\t\t\t\tvar icon = icons[index]\n\t\t\t\t\tif (icon.isActive(isActive)) {\n\t\t\t\t\t\treturn icon.class\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn 'icon-h1'\n\t\t\t}\n\t\t},\n\t\ticonCount() {\n\t\t\tthis.forceRecompute // eslint-disable-line\n\t\t\tthis.windowWidth // eslint-disable-line\n\t\t\tconst menuBarWidth = this.$refs.menubar ? this.$refs.menubar.clientWidth : this.windowWidth - 200\n\t\t\tconst iconCount = Math.max((Math.floor(menuBarWidth / 44) - 2), 0)\n\t\t\treturn iconCount\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tthis.redrawMenuBar()\n\t},\n\tmounted() {\n\t\twindow.addEventListener('resize', this.getWindowWidth)\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('resize', this.getWindowWidth)\n\t},\n\tmethods: {\n\t\tredrawMenuBar() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.getWindowWidth()\n\t\t\t\tthis.forceRecompute++\n\t\t\t})\n\t\t},\n\t\tclickIcon(commands, icon) {\n\t\t\treturn icon.action(commands)\n\t\t},\n\t\trxpClickButton(i, editor) {\n\t\t\tmenuItems[i].run(editor.state, editor.view.dispatch);\n\t\t},\n\t\tgetWindowWidth(event) {\n\t\t\tthis.windowWidth = document.documentElement.clientWidth\n\t\t},\n\t\tgetWindowHeight(event) {\n\t\t\tthis.windowHeight = document.documentElement.clientHeight\n\t\t},\n\t\thideChildMenu(icon) {\n\t\t\tthis.$set(this.submenuVisibility, icon.label, false)\n\t\t},\n\t\ttoggleChildMenu(icon) {\n\t\t\tconst lastValue = this.submenuVisibility.hasOwnProperty(icon.label) ? this.submenuVisibility[icon.label] : false\n\t\t\tthis.$set(this.submenuVisibility, icon.label, !lastValue)\n\t\t},\n\t\tshowImagePrompt(command) {\n\t\t\tconst currentUser = OC.getCurrentUser()\n\t\t\tif (!currentUser) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst _command = command\n\t\t\tOC.dialogs.filepicker('Insert an image', (file) => {\n\t\t\t\tfetchFileInfo(currentUser.uid, file).then((info) => {\n\t\t\t\t\tconst fileInfo = info[0]\n\t\t\t\t\tconsole.debug(fileInfo)\n\t\t\t\t\tconst previewUrl = OC.generateUrl('/core/preview?') + `fileId=${fileInfo.id}&x=1024&y=1024&a=true`\n\t\t\t\t\tconst internalLink = OC.generateUrl('/f/' + fileInfo.id)\n\n\t\t\t\t\t// dirty but works so we have the information stored in markdown\n\t\t\t\t\tconst appendMeta = {\n\t\t\t\t\t\tmimetype: fileInfo.mimetype,\n\t\t\t\t\t\thasPreview: fileInfo.hasPreview,\n\t\t\t\t\t\tfileId: fileInfo.id\n\t\t\t\t\t}\n\t\t\t\t\tconst src = (fileInfo.hasPreview ? previewUrl : internalLink)\n\t\t\t\t\t\t+ '#'\n\t\t\t\t\t\t+ Object.entries(appendMeta).map(([key, val]) => `${key}=${encodeURIComponent(val)}`).join('&')\n\n\t\t\t\t\t_command({\n\t\t\t\t\t\tsrc: src,\n\t\t\t\t\t\talt: fileInfo.name\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}, false, [], true)\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.menubar {\n\t\tposition: fixed;\n\t\tposition: -webkit-sticky;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tdisplay: flex;\n\t\tz-index: 10010; // above modal-header so buttons are clickable\n\t\tbackground-color: var(--color-main-background-translucent);\n\t\theight: 44px;\n\t\t.menubar-icons {\n\t\t\tflex-grow: 1;\n\t\t\tmargin-left: calc((100% - 660px) / 2);\n\t\t}\n\t\t@media (max-width: 660px) {\n\t\t\t.menubar-icons {\n\t\t\t\tmargin-left: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.menubar button {\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tbackground-size: 16px;\n\t\tborder: 0;\n\t\tbackground-color: transparent;\n\t\topacity: .5;\n\t\tcolor: var(--color-main-text);\n\t\tbackground-position: center center;\n\t\tvertical-align: top;\n\t\t&:hover, &:focus, &:active {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\t\t&.is-active,\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\n\t\t&.icon-undo, &.icon-redo {\n\t\t\topacity: .4;\n\t\t}\n\t}\n\n\t.rxpButton {\n\t\twidth: auto !important;\n\t}\n\n\t.menubar .submenu {\n\t\tdisplay: inline-block;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tposition: relative;\n\t\tvertical-align: top;\n\t}\n</style>\n","<!--\n  - @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n  -\n  - @author Julius Härtl <jus@bitgrid.net>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<EditorMenuBubble v-slot=\"{ commands, isActive, getMarkAttrs, menu }\"\n\t\tclass=\"menububble\"\n\t\t:editor=\"editor\"\n\t\t@hide=\"hideLinkMenu\">\n\t\t<div class=\"menububble\" :class=\"{ 'is-active': menu.isActive }\" :style=\"`left: ${menu.left}px; bottom: ${menu.bottom}px;`\">\n\t\t\t<form v-if=\"linkMenuIsActive\" class=\"menububble__form\" @submit.prevent=\"setLinkUrl(commands.link, linkUrl)\">\n\t\t\t\t<input ref=\"linkInput\"\n\t\t\t\t\tv-model=\"linkUrl\"\n\t\t\t\t\tclass=\"menububble__input\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"https://\"\n\t\t\t\t\t@keydown.esc=\"hideLinkMenu\">\n\t\t\t\t<button class=\"menububble__button icon-confirm\" type=\"button\" @click=\"setLinkUrl(commands.link, linkUrl)\" />\n\t\t\t</form>\n\n\t\t\t<template v-else>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"menububble__button\"\n\t\t\t\t\t:class=\"{ 'is-active': isActive.link() }\"\n\t\t\t\t\t@click=\"showLinkMenu(getMarkAttrs('link'))\">\n\t\t\t\t\t<span v-tooltip=\"isActive.link() ? 'Update Link' : 'Add Link'\" class=\"icon-link\" />\n\t\t\t\t\t<span>{{ t('text', 'Add link') }}</span>\n\t\t\t\t</button>\n\t\t\t</template>\n\t\t</div>\n\t</EditorMenuBubble>\n</template>\n\n<script>\nimport { EditorMenuBubble } from 'tiptap'\nimport Tooltip from 'nextcloud-vue/dist/Directives/Tooltip'\n\nexport default {\n\tname: 'MenuBubble',\n\tcomponents: {\n\t\tEditorMenuBubble\n\t},\n\tdirectives: {\n\t\ttooltip: Tooltip\n\t},\n\tprops: {\n\t\teditor: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: null\n\t\t}\n\t},\n\tdata: () => {\n\t\treturn {\n\t\t\tlinkUrl: null,\n\t\t\tlinkMenuIsActive: false\n\t\t}\n\t},\n\tmethods: {\n\t\tshowLinkMenu(attrs) {\n\t\t\tthis.linkUrl = attrs.href\n\t\t\tthis.linkMenuIsActive = true\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.linkInput.focus()\n\t\t\t})\n\t\t},\n\t\thideLinkMenu() {\n\t\t\tthis.linkUrl = null\n\t\t\tthis.linkMenuIsActive = false\n\t\t},\n\n\t\tsetLinkUrl(command, url) {\n\t\t\tif (url && !url.match(/^[a-zA-Z]+:\\/\\//) && !url.match(/^\\//)) {\n\t\t\t\turl = 'https://' + url\n\t\t\t}\n\t\t\tcommand({ href: url })\n\t\t\tthis.hideLinkMenu()\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n\t.menububble {\n\t\tposition: absolute;\n\t\tdisplay: flex;\n\t\tz-index: 10020;\n\t\tbackground: var(--color-main-background-translucent);\n\t\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\t\tborder-radius: 5px;\n\t\tpadding: 0.3rem;\n\t\tmargin-bottom: 0.5rem;\n\t\tvisibility: hidden;\n\t\topacity: 0;\n\t\ttransform: translateX(-50%);\n\t\ttransition: opacity 0.2s, visibility 0.2s;\n\n\t\t&.is-active {\n\t\t\topacity: 1;\n\t\t\tvisibility: visible;\n\t\t}\n\n\t\t&__button {\n\t\t\tdisplay: inline-flex;\n\t\t\tborder: 0;\n\t\t\tpadding: 0.2rem 0.5rem;\n\t\t\tmargin-right: 0.2rem;\n\t\t\tborder-radius: 3px;\n\t\t\tcursor: pointer;\n\n\t\t\t&:last-child {\n\t\t\t\tmargin-right: 0;\n\t\t\t}\n\t\t}\n\n\t\t&__form {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t&__input {\n\t\t\tfont: inherit;\n\t\t\tborder: none;\n\t\t\tbackground: transparent;\n\t\t\tmin-width: 150px;\n\t\t}\n\t}\n</style>\n","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".menubar[data-v-4a501398] {\\n  position: fixed;\\n  position: -webkit-sticky;\\n  position: sticky;\\n  top: 0;\\n  display: flex;\\n  z-index: 10010;\\n  background-color: var(--color-main-background-translucent);\\n  height: 44px;\\n}\\n.menubar .menubar-icons[data-v-4a501398] {\\n    flex-grow: 1;\\n    margin-left: calc((100% - 660px) / 2);\\n}\\n@media (max-width: 660px) {\\n.menubar .menubar-icons[data-v-4a501398] {\\n      margin-left: 0;\\n}\\n}\\n.menubar button[data-v-4a501398] {\\n  width: 44px;\\n  height: 44px;\\n  margin: 0;\\n  background-size: 16px;\\n  border: 0;\\n  background-color: transparent;\\n  opacity: .5;\\n  color: var(--color-main-text);\\n  background-position: center center;\\n  vertical-align: top;\\n}\\n.menubar button[data-v-4a501398]:hover, .menubar button[data-v-4a501398]:focus, .menubar button[data-v-4a501398]:active {\\n    background-color: var(--color-background-dark);\\n}\\n.menubar button.is-active[data-v-4a501398], .menubar button[data-v-4a501398]:hover, .menubar button[data-v-4a501398]:focus {\\n    opacity: 1;\\n}\\n.menubar button.icon-undo[data-v-4a501398], .menubar button.icon-redo[data-v-4a501398] {\\n    opacity: .4;\\n}\\n.rxpButton[data-v-4a501398] {\\n  width: auto !important;\\n}\\n.menubar .submenu[data-v-4a501398] {\\n  display: inline-block;\\n  width: 44px;\\n  height: 44px;\\n  position: relative;\\n  vertical-align: top;\\n}\\n\", \"\"]);\n","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".menububble[data-v-5496a10a] {\\n  position: absolute;\\n  display: flex;\\n  z-index: 10020;\\n  background: var(--color-main-background-translucent);\\n  box-shadow: 0 1px 5px var(--color-box-shadow);\\n  border-radius: 5px;\\n  padding: 0.3rem;\\n  margin-bottom: 0.5rem;\\n  visibility: hidden;\\n  opacity: 0;\\n  transform: translateX(-50%);\\n  transition: opacity 0.2s, visibility 0.2s;\\n}\\n.menububble.is-active[data-v-5496a10a] {\\n    opacity: 1;\\n    visibility: visible;\\n}\\n.menububble__button[data-v-5496a10a] {\\n    display: inline-flex;\\n    border: 0;\\n    padding: 0.2rem 0.5rem;\\n    margin-right: 0.2rem;\\n    border-radius: 3px;\\n    cursor: pointer;\\n}\\n.menububble__button[data-v-5496a10a]:last-child {\\n      margin-right: 0;\\n}\\n.menububble__form[data-v-5496a10a] {\\n    display: flex;\\n    align-items: center;\\n}\\n.menububble__input[data-v-5496a10a] {\\n    font: inherit;\\n    border: none;\\n    background: transparent;\\n    min-width: 150px;\\n}\\n\", \"\"]);\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"EditorMenuBar\", {\n    attrs: { editor: _vm.editor },\n    scopedSlots: _vm._u(\n      [\n        {\n          key: \"default\",\n          fn: function(ref) {\n            var commands = ref.commands\n            var isActive = ref.isActive\n            return [\n              _c(\n                \"div\",\n                { staticClass: \"menubar\" },\n                [\n                  _vm.isRichEditor\n                    ? _c(\n                        \"div\",\n                        { ref: \"menubar\", staticClass: \"menubar-icons\" },\n                        [\n                          _c(\n                            \"button\",\n                            {\n                              staticClass: \"rxpButton\",\n                              on: {\n                                click: function($event) {\n                                  return _vm.rxpClickButton(0, _vm.editor)\n                                }\n                              }\n                            },\n                            [_vm._v(\"Formula\")]\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"button\",\n                            {\n                              staticClass: \"rxpButton\",\n                              on: {\n                                click: function($event) {\n                                  return _vm.rxpClickButton(1, _vm.editor)\n                                }\n                              }\n                            },\n                            [_vm._v(\"Table\")]\n                          ),\n                          _vm._v(\" \"),\n                          _vm._l(_vm.allIcons, function(icon, $index) {\n                            return [\n                              icon.class\n                                ? _c(\"button\", {\n                                    directives: [\n                                      {\n                                        name: \"show\",\n                                        rawName: \"v-show\",\n                                        value: $index < _vm.iconCount,\n                                        expression: \"$index < iconCount\"\n                                      }\n                                    ],\n                                    key: icon.label,\n                                    class: _vm.getIconClasses(isActive, icon),\n                                    attrs: { title: icon.label },\n                                    on: {\n                                      click: function($event) {\n                                        return _vm.clickIcon(commands, icon)\n                                      }\n                                    }\n                                  })\n                                : [\n                                    _c(\n                                      \"div\",\n                                      {\n                                        directives: [\n                                          {\n                                            name: \"show\",\n                                            rawName: \"v-show\",\n                                            value: $index < _vm.iconCount,\n                                            expression: \"$index < iconCount\"\n                                          },\n                                          {\n                                            name: \"click-outside\",\n                                            rawName: \"v-click-outside\",\n                                            value: function() {\n                                              return _vm.hideChildMenu(icon)\n                                            },\n                                            expression:\n                                              \"() => hideChildMenu(icon)\"\n                                          }\n                                        ],\n                                        key: icon.label,\n                                        staticClass: \"submenu\"\n                                      },\n                                      [\n                                        _c(\"button\", {\n                                          class: _vm.childIconClass(\n                                            isActive,\n                                            icon.children\n                                          ),\n                                          attrs: { title: icon.label },\n                                          on: {\n                                            click: function($event) {\n                                              $event.preventDefault()\n                                              return _vm.toggleChildMenu(icon)\n                                            }\n                                          }\n                                        }),\n                                        _vm._v(\" \"),\n                                        _c(\n                                          \"div\",\n                                          {\n                                            staticClass:\n                                              \"popovermenu menu-center\",\n                                            class: {\n                                              open: _vm.isChildMenuVisible(icon)\n                                            }\n                                          },\n                                          [\n                                            _c(\"PopoverMenu\", {\n                                              attrs: {\n                                                menu: _vm.childPopoverMenu(\n                                                  isActive,\n                                                  commands,\n                                                  icon.children,\n                                                  icon\n                                                )\n                                              }\n                                            })\n                                          ],\n                                          1\n                                        )\n                                      ]\n                                    )\n                                  ]\n                            ]\n                          }),\n                          _vm._v(\" \"),\n                          _c(\n                            \"Actions\",\n                            [\n                              _vm._l(_vm.allIcons, function(icon, $index) {\n                                return [\n                                  icon.class && _vm.isHiddenInMenu($index)\n                                    ? _c(\n                                        \"ActionButton\",\n                                        {\n                                          key: icon.class,\n                                          attrs: { icon: icon.class },\n                                          on: {\n                                            click: function($event) {\n                                              return _vm.clickIcon(\n                                                commands,\n                                                icon\n                                              )\n                                            }\n                                          }\n                                        },\n                                        [\n                                          _vm._v(\n                                            \"\\n\\t\\t\\t\\t\\t\\t\" +\n                                              _vm._s(icon.label) +\n                                              \"\\n\\t\\t\\t\\t\\t\"\n                                          )\n                                        ]\n                                      )\n                                    : !icon.class && _vm.isHiddenInMenu($index)\n                                    ? _vm._l(icon.children, function(\n                                        childIcon\n                                      ) {\n                                        return _c(\n                                          \"ActionButton\",\n                                          {\n                                            key: childIcon.class,\n                                            attrs: { icon: childIcon.class },\n                                            on: {\n                                              click: function($event) {\n                                                return _vm.clickIcon(\n                                                  commands,\n                                                  childIcon\n                                                )\n                                              }\n                                            }\n                                          },\n                                          [\n                                            _vm._v(\n                                              \"\\n\\t\\t\\t\\t\\t\\t\\t\" +\n                                                _vm._s(childIcon.label) +\n                                                \"\\n\\t\\t\\t\\t\\t\\t\"\n                                            )\n                                          ]\n                                        )\n                                      })\n                                    : _vm._e()\n                                ]\n                              })\n                            ],\n                            2\n                          )\n                        ],\n                        2\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm._t(\"default\", [_vm._v(\"\\n\\t\\t\\tLeft side\\n\\t\\t\")])\n                ],\n                2\n              )\n            ]\n          }\n        }\n      ],\n      null,\n      true\n    )\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"EditorMenuBubble\", {\n    staticClass: \"menububble\",\n    attrs: { editor: _vm.editor },\n    on: { hide: _vm.hideLinkMenu },\n    scopedSlots: _vm._u([\n      {\n        key: \"default\",\n        fn: function(ref) {\n          var commands = ref.commands\n          var isActive = ref.isActive\n          var getMarkAttrs = ref.getMarkAttrs\n          var menu = ref.menu\n          return [\n            _c(\n              \"div\",\n              {\n                staticClass: \"menububble\",\n                class: { \"is-active\": menu.isActive },\n                style:\n                  \"left: \" + menu.left + \"px; bottom: \" + menu.bottom + \"px;\"\n              },\n              [\n                _vm.linkMenuIsActive\n                  ? _c(\n                      \"form\",\n                      {\n                        staticClass: \"menububble__form\",\n                        on: {\n                          submit: function($event) {\n                            $event.preventDefault()\n                            return _vm.setLinkUrl(commands.link, _vm.linkUrl)\n                          }\n                        }\n                      },\n                      [\n                        _c(\"input\", {\n                          directives: [\n                            {\n                              name: \"model\",\n                              rawName: \"v-model\",\n                              value: _vm.linkUrl,\n                              expression: \"linkUrl\"\n                            }\n                          ],\n                          ref: \"linkInput\",\n                          staticClass: \"menububble__input\",\n                          attrs: { type: \"text\", placeholder: \"https://\" },\n                          domProps: { value: _vm.linkUrl },\n                          on: {\n                            keydown: function($event) {\n                              if (\n                                !$event.type.indexOf(\"key\") &&\n                                _vm._k($event.keyCode, \"esc\", 27, $event.key, [\n                                  \"Esc\",\n                                  \"Escape\"\n                                ])\n                              ) {\n                                return null\n                              }\n                              return _vm.hideLinkMenu($event)\n                            },\n                            input: function($event) {\n                              if ($event.target.composing) {\n                                return\n                              }\n                              _vm.linkUrl = $event.target.value\n                            }\n                          }\n                        }),\n                        _vm._v(\" \"),\n                        _c(\"button\", {\n                          staticClass: \"menububble__button icon-confirm\",\n                          attrs: { type: \"button\" },\n                          on: {\n                            click: function($event) {\n                              return _vm.setLinkUrl(commands.link, _vm.linkUrl)\n                            }\n                          }\n                        })\n                      ]\n                    )\n                  : [\n                      _c(\n                        \"button\",\n                        {\n                          staticClass: \"menububble__button\",\n                          class: { \"is-active\": isActive.link() },\n                          on: {\n                            click: function($event) {\n                              _vm.showLinkMenu(getMarkAttrs(\"link\"))\n                            }\n                          }\n                        },\n                        [\n                          _c(\"span\", {\n                            directives: [\n                              {\n                                name: \"tooltip\",\n                                rawName: \"v-tooltip\",\n                                value: isActive.link()\n                                  ? \"Update Link\"\n                                  : \"Add Link\",\n                                expression:\n                                  \"isActive.link() ? 'Update Link' : 'Add Link'\"\n                              }\n                            ],\n                            staticClass: \"icon-link\"\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"span\", [\n                            _vm._v(_vm._s(_vm.t(\"text\", \"Add link\")))\n                          ])\n                        ]\n                      )\n                    ]\n              ],\n              2\n            )\n          ]\n        }\n      }\n    ])\n  })\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9d380b96\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1715a6ad\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { render, staticRenderFns } from \"./MenuBar.vue?vue&type=template&id=4a501398&scoped=true&\"\nimport script from \"./MenuBar.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a501398\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/marekbaranowski/Documents/nextcloud/apps/text/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4a501398')) {\n      api.createRecord('4a501398', component.options)\n    } else {\n      api.reload('4a501398', component.options)\n    }\n    module.hot.accept(\"./MenuBar.vue?vue&type=template&id=4a501398&scoped=true&\", function () {\n      api.rerender('4a501398', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/MenuBar.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=script&lang=js&\"","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=style&index=0&id=4a501398&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBar.vue?vue&type=template&id=4a501398&scoped=true&\"","import { render, staticRenderFns } from \"./MenuBubble.vue?vue&type=template&id=5496a10a&scoped=true&\"\nimport script from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./MenuBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5496a10a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/marekbaranowski/Documents/nextcloud/apps/text/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5496a10a')) {\n      api.createRecord('5496a10a', component.options)\n    } else {\n      api.reload('5496a10a', component.options)\n    }\n    module.hot.accept(\"./MenuBubble.vue?vue&type=template&id=5496a10a&scoped=true&\", function () {\n      api.rerender('5496a10a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/MenuBubble.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=script&lang=js&\"","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/dist/cjs.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=style&index=0&id=5496a10a&scoped=true&lang=scss&\"","export * from \"-!../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MenuBubble.vue?vue&type=template&id=5496a10a&scoped=true&\"","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\n/**\n * Callback that should be executed after the document is ready\n * @param callback\n */\nimport axios from '@nextcloud/axios'\nimport { generateRemoteUrl } from 'nextcloud-server/dist/router'\nimport { openMimetypes } from './mime'\n\nconst FILE_ACTION_IDENTIFIER = 'Edit with text app'\n\nconst fetchFileInfo = async function(user, path) {\n\tconst response = await axios({\n\t\tmethod: 'PROPFIND',\n\t\turl: generateRemoteUrl(`dav/files/${user}${path}`),\n\t\theaders: {\n\t\t\trequesttoken: OC.requestToken,\n\t\t\t'content-Type': 'text/xml'\n\t\t},\n\t\tdata: `<?xml version=\"1.0\"?>\n<d:propfind  xmlns:d=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\" xmlns:nc=\"http://nextcloud.org/ns\" xmlns:ocs=\"http://open-collaboration-services.org/ns\">\n  <d:prop>\n    <d:getlastmodified />\n    <d:getetag />\n    <d:getcontenttype />\n    <d:resourcetype />\n    <oc:fileid />\n    <oc:permissions />\n    <oc:size />\n    <d:getcontentlength />\n    <nc:has-preview />\n    <nc:mount-type />\n    <nc:is-encrypted />\n    <ocs:share-permissions />\n    <oc:tags />\n    <oc:favorite />\n    <oc:comments-unread />\n    <oc:owner-id />\n    <oc:owner-display-name />\n    <oc:share-types />\n  </d:prop>\n</d:propfind>`\n\t})\n\n\tconst files = OCA.Files.App.fileList.filesClient._client.parseMultiStatus(response.data)\n\treturn files.map(file => {\n\t\tconst fileInfo = OCA.Files.App.fileList.filesClient._parseFileInfo(file)\n\t\tfileInfo.href = file.href\n\t\treturn fileInfo\n\t})\n}\n\nconst registerFileCreate = () => {\n\tconst newFileMenuPlugin = {\n\t\tattach: function(menu) {\n\t\t\tvar fileList = menu.fileList\n\n\t\t\t// only attach to main file list, public view is not supported yet\n\t\t\tif (fileList.id !== 'files' && fileList.id !== 'files.public') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// register the new menu entry\n\t\t\tmenu.addMenuEntry({\n\t\t\t\tid: 'file',\n\t\t\t\tdisplayName: t('text', 'New text document'),\n\t\t\t\ttemplateName: t('text', 'New text document') + '.rxp',\n\t\t\t\ticonClass: 'icon-filetype-text',\n\t\t\t\tfileType: 'file',\n\t\t\t\tactionHandler: function(name) {\n\t\t\t\t\tfileList.createFile(name).then(function(status, data) {\n\t\t\t\t\t\tlet fileInfoModel = new OCA.Files.FileInfoModel(data)\n\t\t\t\t\t\tif (typeof OCA.Viewer !== 'undefined') {\n\t\t\t\t\t\t\tOCA.Files.fileActions.triggerAction('view', fileInfoModel, fileList)\n\t\t\t\t\t\t} else if (typeof OCA.Viewer === 'undefined') {\n\t\t\t\t\t\t\tOCA.Files.fileActions.triggerAction(FILE_ACTION_IDENTIFIER, fileInfoModel, fileList)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\tOC.Plugins.register('OCA.Files.NewFileMenu', newFileMenuPlugin)\n}\n\nconst registerFileActionFallback = () => {\n\tconst sharingToken = document.getElementById('sharingToken') ? document.getElementById('sharingToken').value : null\n\tconst dir = document.getElementById('dir').value\n\n\tif (!sharingToken || dir !== '') {\n\t\tconst ViewerRoot = document.createElement('div')\n\t\tViewerRoot.id = 'text-viewer-fallback'\n\t\tdocument.body.appendChild(ViewerRoot)\n\t\tconst registerAction = (mime) => OCA.Files.fileActions.register(\n\t\t\tmime,\n\t\t\tFILE_ACTION_IDENTIFIER,\n\t\t\tOC.PERMISSION_UPDATE | OC.PERMISSION_READ,\n\t\t\tOC.imagePath('core', 'actions/rename'),\n\t\t\t(filename) => {\n\t\t\t\tconst file = window.FileList.findFile(filename)\n\t\t\t\tPromise.all([\n\t\t\t\t\timport('vue'),\n\t\t\t\t\timport(/* webpackChunkName: \"files-modal\" */'./../components/PublicFilesEditor')\n\t\t\t\t]).then((imports) => {\n\t\t\t\t\tconst path = window.FileList.getCurrentDirectory() + '/' + filename\n\t\t\t\t\tconst Vue = imports[0].default\n\t\t\t\t\tVue.prototype.t = window.t\n\t\t\t\t\tVue.prototype.n = window.n\n\t\t\t\t\tVue.prototype.OCA = window.OCA\n\t\t\t\t\tconst Editor = imports[1].default\n\t\t\t\t\tconst vm = new Vue({\n\t\t\t\t\t\trender: h => h(Editor, {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tfileId: file ? file.id : null,\n\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\tshareToken: sharingToken,\n\t\t\t\t\t\t\t\trelativePath: path,\n\t\t\t\t\t\t\t\tmimeType: file.mimetype\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\tvm.$mount(ViewerRoot)\n\t\t\t\t})\n\t\t\t},\n\t\t\tt('text', 'Edit')\n\t\t)\n\n\t\tfor (let i = 0; i < openMimetypes.length; i++) {\n\t\t\tregisterAction(openMimetypes[i])\n\t\t\tOCA.Files.fileActions.setDefault(openMimetypes[i], FILE_ACTION_IDENTIFIER)\n\t\t}\n\t}\n\n}\n\nexport {\n\tfetchFileInfo,\n\tregisterFileActionFallback,\n\tregisterFileCreate,\n\tFILE_ACTION_IDENTIFIER\n}\n","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nconst openMimetypes = [\"application/reactivepad\"];\n\nexport { openMimetypes };\n","/*\n * @copyright Copyright (c) 2019 Julius Härtl <jus@bitgrid.net>\n *\n * @author Julius Härtl <jus@bitgrid.net>\n *\n * @license GNU AGPL version 3 or any later version\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n\nexport default [\n\t{\n\t\tlabel: t('text', 'Undo'),\n\t\tclass: 'icon-undo',\n\t\tisActive: (isActive) => {},\n\t\taction: (command) => command.undo()\n\t},\n\t{\n\t\tlabel: t('text', 'Redo'),\n\t\tclass: 'icon-redo',\n\t\tisActive: (isActive) => {},\n\t\taction: (command) => command.redo()\n\t},\n\t{\n\t\tlabel: t('text', 'Bold'),\n\t\tclass: 'icon-bold',\n\t\tisActive: (isActive) => isActive.strong(),\n\t\taction: (command) => {\n\t\t\treturn command.strong()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Italic'),\n\t\tclass: 'icon-italic',\n\t\tisActive: (isActive) => isActive.em(),\n\t\taction: (command) => {\n\t\t\treturn command.em()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Strikethrough'),\n\t\tclass: 'icon-strike',\n\t\tisActive: (isActive) => isActive.strike(),\n\t\taction: (command) => {\n\t\t\treturn command.strike()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Paragraph'),\n\t\tclass: 'icon-paragraph',\n\t\tisActive: (isActive) => {},\n\t\taction: (command) => {\n\t\t\treturn command.paragraph()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Headings'),\n\t\tvisible: false,\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 1'),\n\t\t\t\tclass: 'icon-h1',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 1 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 1 })\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 2'),\n\t\t\t\tclass: 'icon-h2',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 2 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 2 })\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 3'),\n\t\t\t\tclass: 'icon-h3',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 3 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 3 })\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 4'),\n\t\t\t\tclass: 'icon-h4',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 4 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 4 })\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 5'),\n\t\t\t\tclass: 'icon-h5',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 5 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 5 })\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: t('text', 'Heading 6'),\n\t\t\t\tclass: 'icon-h6',\n\t\t\t\tisActive: (isActive) => isActive.heading({ level: 6 }),\n\t\t\t\taction: (command) => {\n\t\t\t\t\treturn command.heading({ level: 6 })\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tlabel: t('text', 'Unordered list'),\n\t\tclass: 'icon-ul',\n\t\tisActive: (isActive) => isActive.bullet_list(),\n\t\taction: (command) => {\n\t\t\treturn command.bullet_list()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Ordered list'),\n\t\tclass: 'icon-ol',\n\t\tisActive: (isActive) => isActive.ordered_list(),\n\t\taction: (command) => {\n\t\t\treturn command.ordered_list()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Blockquote'),\n\t\tclass: 'icon-quote',\n\t\tisActive: (isActive) => isActive.blockquote(),\n\t\taction: (command) => {\n\t\t\treturn command.blockquote()\n\t\t}\n\t},\n\t{\n\t\tlabel: t('text', 'Code block'),\n\t\tclass: 'icon-code',\n\t\tisActive: (isActive) => isActive.code_block(),\n\t\taction: (command) => {\n\t\t\treturn command.code_block()\n\t\t}\n\t}\n]\n"],"sourceRoot":""}